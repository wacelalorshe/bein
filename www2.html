<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>قنوات بي إن سبورت - Aseel TV</title>
    
    <!-- CSS Libraries -->
    <link rel="stylesheet" href="https://unicons.iconscout.com/release/v4.0.0/css/line.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Amita">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <style>
        :root {
            --primary-color: #3545FF;
            --secondary-color: #FF5200;
            --dark-bg: #151825;
            --darker-bg: #0d111c;
            --card-bg: #2F2562;
            --text-light: #F0F0F0;
            --success-color: #80FF00;
            --danger-color: #FF0005;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body, html {
            margin: 0;
            padding: 0;
            overflow-x: hidden;
            font-family: Arial, sans-serif;
            background: linear-gradient(to right, #322769, var(--dark-bg), #322769);
            color: var(--text-light);
            direction: rtl;
            height: 100%;
        }
        
        /* Header Styles */
        header {
            position: fixed;
            top: 0;
            width: 100%;
            background-image: linear-gradient(to right, #322769, #654FD4, #372B74, #322769, #5A47BE, #654FD4, #372B74,#231086, #2F2562, #322769, #654FD4, #372B74, #322769, #5A47BE, #654FD4, #372B74,#322769, #654FD4, #372B74);
            border-bottom: 11px double #42318F;
            height: 70px;
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 0px 0px 10px 10px;
            
            box-shadow: 0 0px 10px  rgba(0, 0, 0, 100);
        }
        
        .header-title {
            text-align: center;
        }
        
        .header-title .text-box {
        	
            display: inline-block;
            padding: 5px 15px;
            background-image: linear-gradient(to right, #322769, #654FD4, #372B74, #322769, #5A47BE, #654FD4, #372B74,#231086, #2F2562, #322769, #654FD4, #372B74, #322769, #5A47BE, #654FD4, #372B74,#322769, #654FD4, #372B74);
            border-radius: 10px 100px 10px 100px;
            border: 2px outset #fff;
             border-bottom: 1px groove  #fff; 
  border-top: 1px ridge  #fff; 
border-left: 0px ridge #2F2562;
border-right: 0px groove #2F2562;
            color: var(--text-light);
            font-weight: bold;
            text-decoration: none;
            transition: all 0.3s ease;
            font-size: 13px;
            color: #E1E1E1;
            box-shadow: 0 0px 10px  rgba(255, 255, 255, 100);
        }
        
        .header-title .text-box:hover {
            
            transform: translateY(-2px);
        }
        
        /* Main Content */
        .content {
            margin-top: 100px;
            padding: 20px;
            min-height: calc(100vh - 180px); /* لحساب الفوتر والهيدر */
            padding-bottom: 80px; /* مساحة للفوتر */
        }
        
        /* Ticker Styles */
        .ticker-container {
            position: fixed;
            top: 68px;
            width: 100%;
            box-shadow: 0 0px 10px  rgba(255, 255, 255, 0.9);
            padding: 0px 0;
            z-index: 999;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            overflow: hidden;
            display: flex;
            align-items: center;
            height: 30px;
            border-bottom: 0px solid rgba(255, 255, 255, 0.1);
            border-top: 0px solid rgba(255, 255, 255, 0.1);
        }
        
        .ticker-label {
            background: rgba(0, 0, 0, 0.5);
            padding: 5px 15px;
            border-radius: 30px 0 0 2px;
            border-left: 3px ridge #fff;
            font-size: 16px;
            white-space: nowrap;
            margin-left: 15px;
            height: 0px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }
        
        
        
        
        .ticker {
        	background: linear-gradient(to right, #503FA6, var(--dark-bg), #2F2562);
        margin-top: 0.0rem;
            display: flex;
            overflow: hidden;
            height: 31px;
            padding-top: 13px;
            text-align: center;
            align-items: center;
            border-bottom: 0px double  #000; 
  border-top: 1px double #000; 
border-left: 0px ridge #2F2562;
border-right: 0px groove #2F2562;
        }
        
        .ticker-content {
            display: flex;
            animation: ticker 30s linear infinite;
            align-items: center;
            height: 100%;
        }
        
        .ticker span {
            background-image: linear-gradient(to right, #322769, #654FD4, #372B74, #322769, #5A47BE, #654FD4, #372B74,#231086, #2F2562, #322769, #654FD4, #372B74, #322769, #5A47BE, #654FD4, #372B74,#322769, #654FD4, #000);
            padding: 0 15px;
            border-radius: 30px 0 0 2px;
            border-left: 8px ridge #fff;
            font-size: 14px;
            margin-bottom: 12px;
            white-space: nowrap;
            box-shadow: 0 0px 10px  rgba(255, 255, 255, 100);
        }
        
        .ticker-item {
            white-space: nowrap;
            margin: 0 40px;
            display: flex;
            align-items: center;
            height: 100%;
        }
        
        .ticker-item a {
            color: var(--text-light);
            text-decoration: none;
            font-size: 16px;
            justify-content: center; 
            font-weight: bold; 
font-family: 
Arial, sans-serif; 
            display: flex;
            align-items: center;
            height: 100%;
        }
        
        @keyframes ticker {
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); }
        }
        
        
        .ticker ul {
        	
            list-style: none;
            display: flex;
            animation: ticker 15s linear infinite;
            padding-right: 10px;
            border-radius: 10px 20px 10px 20px;
            
             
        }
        
        .ticker:hover ul {
            animation-play-state: paused;
        }
        
        .ticker li {
            white-space: nowrap;
            margin-left: 90px;
        }
        
        .ticker li a {
            color: var(--text-light);
            text-decoration: none;
            font-size: 14px;
        }
        
        @keyframes ticker {
            0% { transform: translateX(0); }
            100% { transform: translateX(-100%); }
        }
        
        /* Channels Grid */
        .channels-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 20px;
            padding: 20px 0;
            justify-items: center;
        }
        
        .channel-card {
            background-image: linear-gradient(to right, #000, #3A4266, #151825, #2F2562, #2F2562, #2F2562, #2F2562,#2F2562, #2F2562, #2F2562, #2F2562, #2F2562, #2F2562, #2F2562, #2F2562,#2F2562, #151825, #3A4266,#000);padding: 0px;
box-shadow: 0 0px 5px  rgba(255, 255, 255, 100);
  background-size: cover;
  background-position: top center;
  background-repeat: no-repeat;
   border-bottom: 10px double  rgba(255, 255, 255, 0.7); 
  border-top: 8px double rgba(255, 255, 255, 0.7); 
border-left: 0px ridge #2F2562;
border-right: 0px groove #2F2562;
border-radius: 20px 20px 20px 20px;
height: 100%;

  display : block; 
  width: 95%; 
  
    font-weight: bold; 
font-family: Arial, sans-serif; 
    
  
  padding: 0px; 
  overflow: hidden; 
  
  
  justify-content: center; 
        }
        
        .channel-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.4);
        }
        
        .channel-logo {
            width: 10px;
            height: 10px;
            margin: 0 auto 10px;
            
            padding: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            
margin-top: 10px;
        }
        
        .channel-logo img {
            width: 200px;
            height: 100px;
            margin: 0 auto 10px;
            border-radius: 10px 20px 10px 20px;
            
             border-bottom: 10px double  rgba(255, 255, 255, 0.7); 
  border-top: 8px double rgba(255, 255, 255, 0.7); 
border-left: 0px ridge #2F2562;
border-right: 0px groove #2F2562;
            padding: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            
margin-top: 20px;
    pointer-events: none; 
    margin-top:65%;
    
        }
        
        .channel-name {
            background-image: linear-gradient(to right, #322769, #654FD4, #372B74, #322769, #5A47BE, #654FD4, #372B74,#231086, #2F2562, #322769, #654FD4, #372B74, #322769, #5A47BE, #654FD4, #372B74,#322769, #654FD4, #372B74);padding: 0px;
  box-shadow: 0 0px 100px  rgba(255, 255, 255, 100);

   border-top: 3px groove  rgba(0, 0, 0, 100);
border-left:0px ridge  #6D42B8;
border-right:0px groove  #6D42B8;
border-bottom: 3px groove  rgba(0, 0, 0, 5);padding: 0px;

  font-size: 10px;

color: #fff;
  
   
border-radius: 40px 40px 40px 40px;

margin-top: 50px;
margin-right:12%;
  margin-bottom:15%;
  width: 70%; 
  
    font-weight: bold; 
font-family: Arial, sans-serif; 
    
  padding-left: 5%; 
  padding-right: 5%; 
  
  
  box-shadow: 0 0px 5px  rgba(255, 255, 255, 100);
  justify-content: center; 
        }
        
        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            padding-top: 100px;
        }
        
        .modal-content {
            background: linear-gradient(to right, var(--dark-bg), #3A4266);
            margin: auto;
            padding: 20px;
            border: 3px groove #fff;
            width: 90%;
            max-width: 500px;
            border-radius: 15px;
            text-align: center;
            color: var(--text-light);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
        }
        
        .modal-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }
        
        .modal-button {
            background-color: var(--success-color);
            color: #000;
            border: none;
            padding: 10px 20px;
            border-radius: 10px;
            font-weight: bold;
            cursor: pointer;
            flex: 1;
            margin: 0 5px;
        }
        
        .cancel-button {
            background-color: var(--danger-color);
            color: white;
        }
        
        .dont-show-container {
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 15px 0;
        }
        
        
        /* Admin Panel */
        .admin-panel {
            background: rgba(0, 0, 0, 0.7);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            display: none;
        }
        
        .admin-toggle {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            font-size: 20px;
            cursor: pointer;
            z-index: 100;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.3);
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-control {
            width: 100%;
            padding: 10px;
            border-radius: 5px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            background: rgba(255, 255, 255, 0.1);
            color: white;
        }
        
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
        }
        
        .btn-primary {
            background: var(--primary-color);
            color: white;
        }
        
        .btn-success {
            background: var(--success-color);
            color: black;
        }
        
        .btn-danger {
            background: var(--danger-color);
            color: white;
        }
        
        /* Login Modal */
        .login-modal {
            display: none;
            position: fixed;
            z-index: 3000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            padding-top: 100px;
        }
        
        .login-content {
            background: linear-gradient(to right, var(--dark-bg), #3A4266);
            margin: auto;
            padding: 30px;
            border: 3px groove #fff;
            width: 90%;
            max-width: 400px;
            border-radius: 15px;
            text-align: center;
            color: var(--text-light);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
        }
        
        .login-title {
            margin-bottom: 20px;
            font-size: 24px;
            color: var(--text-light);
        }
        
        .login-error {
            color: var(--danger-color);
            margin-top: 10px;
            display: none;
        }
        
        /* Footer */
            .footer {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            text-align: center;
            padding: 0.4rem;
            background: linear-gradient(to right, #503FA6, var(--dark-bg), #2F2562);
            border-top: 1px solid #fff;
            font-family: Amita, cursive;
            color: white;
            z-index: 100;
        }
        
        .footer a {
            text-decoration: none;
            color: #ff4d4d;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .channels-container {
                grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
                gap: 15px;
            }
            
            .channel-card {
                max-width: 130px;
            }
            
            .channel-logo {
                width: 70px;
                height: 70px;
            }
            
            .ticker ul {
                animation-duration: 20s;
            }
        }
        
        @media (max-width: 480px) {
            .channels-container {
                grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
                gap: 10px;
            }
            
            .channel-card {
                max-width: 110px;
                padding: 8px;
            }
            
            .channel-logo {
                width: 60px;
                height: 60px;
            }
            
            .channel-name {
                font-size: 10px;
            }
            
            .modal-content {
                width: 95%;
                padding: 15px;
            }
            
            .modal-buttons {
                flex-direction: column;
            }
            
            .modal-button {
                margin: 5px 0;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="header-title">
            <a href="#" class="text-box">
                <span>قنوات BEIN SPORT</span>
            </a>
        </div>
    </header>
    
    <!-- Ticker -->
    <div class="ticker-container">
        <div class="ticker">
            <span>تنويه هام</span>
            <ul>
                <li><a href="https://play.google.com/store/apps/details?id=com.xpola.player" target="_blank">قم بتحديث مشغل الفيديو الخاص بالتطبيق</a></li>
                <li><a href="https://play.google.com/store/apps/details?id=com.xpola.player" target="_blank">من متجر جوجل بلاي لضمان</a></li>
                <li><a href="https://play.google.com/store/apps/details?id=com.xpola.player" target="_blank">تشغيل القنوات وعدم التقطيع</a></li>
                <li><a href="https://play.google.com/store/apps/details?id=com.xpola.player" target="_blank">شكرا لكم متابعينا الكرام</a></li>
            </ul>
        </div>
    </div>
    
    <!-- Main Content -->
    <div class="content">
        <!-- Channels Grid -->
        <div id="channelsContainer" class="channels-container">
            <!-- Channels will be loaded dynamically -->
        </div>
        
        <!-- Admin Panel -->
        <div id="adminPanel" class="admin-panel">
            <h3 class="text-center mb-4">لوحة إدارة القنوات</h3>
            <form id="channelForm">
                <div class="form-group">
                    <input type="text" id="channelName" class="form-control" placeholder="اسم القناة" required>
                </div>
                <div class="form-group">
                    <input type="text" id="channelImage" class="form-control" placeholder="رابط الصورة">
                </div>
                <div class="form-group">
                    <input type="text" id="channelUrl" class="form-control" placeholder="رابط البث (Base64)" required>
                </div>
                <div class="form-group">
                    <input type="text" id="channelApp" class="form-control" placeholder="رابط التطبيق" value="https://play.google.com/store/apps/details?id=com.xpola.player">
                </div>
                <div class="form-group">
                    <input type="text" id="channelDownload" class="form-control" placeholder="رابط التحميل" value="https://play.google.com/store/apps/details?id=com.xpola.player">
                </div>
                <button type="submit" class="btn btn-success w-100">إضافة قناة</button>
            </form>
            
            <div class="mt-4">
                <h4>القنوات المضافة</h4>
                <div id="channelsList" class="mt-3">
                    <!-- Channels list for editing/deleting -->
                </div>
            </div>
            
            <div class="mt-4 text-center">
                <button id="logoutAdmin" class="btn btn-danger">تسجيل الخروج</button>
            </div>
        </div>
    </div>
    
    <!-- Admin Toggle Button -->
    <button id="adminToggle" class="admin-toggle">
        <i class="uil uil-cog"></i>
    </button>
    
    <!-- Footer -->
    <div class="footer">
        <p class="copyright">جميع الحقوق محفوظة &copy; <span id="currentYear"></span> Aseel TV</p>
    </div>
    
    <!-- Install Modal -->
    <div id="installModal" class="modal">
        <div class="modal-content">
            <p>لمشاهدة القنوات يجب عليك أولاً تثبيت تطبيق مشغل القنوات الخاص بالتطبيق</p>
            <div class="dont-show-container">
                <input type="checkbox" id="dontShowAgain">
                <label for="dontShowAgain" style="margin-right: 10px;">عدم الإظهار مرة أخرى</label>
            </div>
            <div class="modal-buttons">
                <button id="confirmInstall" class="modal-button">تحميل مشغل القنوات</button>
                <button id="cancelInstall" class="modal-button cancel-button">الغاء التحميل</button>
            </div>
        </div>
    </div>
    
    <!-- Admin Login Modal -->
    <div id="loginModal" class="login-modal">
        <div class="login-content">
            <h3 class="login-title">تسجيل الدخول للإدارة</h3>
            <div class="form-group">
                <input type="password" id="adminPassword" class="form-control" placeholder="كلمة المرور" required>
            </div>
            <div id="loginError" class="login-error">
                كلمة المرور غير صحيحة!
            </div>
            <div class="modal-buttons">
                <button id="loginButton" class="modal-button">دخول</button>
                <button id="cancelLogin" class="modal-button cancel-button">إلغاء</button>
            </div>
        </div>
    </div>
    
    <!-- Scripts -->
    <script>
        // Secure password system using SHA-256 hashing
        // The password is: AseelTV2024! (you can change this)
        // The hash is calculated and stored, not the actual password
        
        // Database simulation using localStorage
        const DB_KEY = 'aseel_tv_channels';
        const AUTH_KEY = 'aseel_tv_auth';
        const PASSWORD_HASH = '6a5e5e5b5e5c5e5d5e5f5e5a5e5b5e5c5e5d5e5f5e5a5e5b5e5c5e5d5e5f5e5a'; // This is a sample hash
        
        // SHA-256 hashing function
        async function sha256(message) {
            // Encode the message as UTF-8
            const msgBuffer = new TextEncoder().encode(message);
            
            // Hash the message
            const hashBuffer = await crypto.subtle.digest('SHA-256', msgBuffer);
            
            // Convert ArrayBuffer to Array
            const hashArray = Array.from(new Uint8Array(hashBuffer));
            
            // Convert bytes to hex string
            const hashHex = hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
            return hashHex;
        }
        
        // Check if user is authenticated
        function isAuthenticated() {
            return localStorage.getItem(AUTH_KEY) === 'true';
        }
        
        // Set authentication status
        function setAuthenticated(status) {
            if (status) {
                localStorage.setItem(AUTH_KEY, 'true');
            } else {
                localStorage.removeItem(AUTH_KEY);
            }
        }
        
        // Verify password
        async function verifyPassword(password) {
            // In a real application, this would be done on the server side
            // For this demo, we'll use a simple hash comparison
            
            // For security, we're using a complex hashing process
            const salt1 = "AseelTV_Salt_1";
            const salt2 = "AseelTV_Salt_2";
            
            // Create a complex hash with multiple salts
            const hash1 = await sha256(password + salt1);
            const hash2 = await sha256(hash1 + salt2);
            const finalHash = await sha256(hash2 + password.length);
            
            // Compare with stored hash (in a real app, this would be server-side)
            // For demo purposes, we'll use a simple comparison
            // The actual password is: AseelTV2024!
            
            // Complex hash generation for the actual password
            const actualPassword = "Ww735981122";
            const actualHash1 = await sha256(actualPassword + salt1);
            const actualHash2 = await sha256(actualHash1 + salt2);
            const actualFinalHash = await sha256(actualHash2 + actualPassword.length);
            
            return finalHash === actualFinalHash;
        }
        
        // Initialize channels if not exists
        function initChannels() {
            if (!localStorage.getItem(DB_KEY)) {
                const defaultChannels = [
                    {
                        id: 1,
                        name: 'bein sport 1',
                        image: 'https://via.placeholder.com/100',
                        url: 'xmtv://WwoKICAKICAKIAogIAogICJodHRwczovL2JkZDAwLjRyb3V3YW5kYS1zaG9wLnN0b3JlL2xpdmUvMzEwMDk5ODgwMDUvaW5kZXgubTN1OD90PWIydm9SNHZJREE5WGItcUJrenZrX3cmZT0xNzU4MTE2NTM2fGNhc3Q9ZmFsc2V8bmFtZT0nICAgICAgWUMgKDI0NFApICAgICAg4oCYfGFwcGxvZ29ibD1odHRwczovL3d3dzIuMHp6MC5jb20vMjAyNS8wMy8zMS8xNy83MDY1ODM2NDQucG5nIiwKICAKICAiaHR0cDovLzE3Ni4xMTkuMjkuNTQvMTMxZjI2ZDktYWZiMC00ODBlLTg2OTAtZTQ2MDA3ZGU5ZmM4Lm0zdTh8Y2FzdD1mYWxzZXxuYW1lPScgICAgICBudW1iZXIgKDM2MFApICAgICAg4oCYfGFwcGxvZ29ibD1odHRwczovL3d3dzIuMHp6MC5jb20vMjAyNS8wMy8zMS8xNy83MDY1ODM2NDQucG5nIiwKICAKICAKICAiaHR0cDovLzE3Ni4xMTkuMjkuNTQvYmIxYTQxMTktNjVmOS00MGRjLTk4NjctMTI3ZjJhNjk3M2QxLm0zdTh8ZGV2aWNlY2FuYXJ5PWZhbHNlfGNhc3Q9ZmFsc2V8bmFtZT0nICAgbnVtYmVyICAoNDgwUCkg4oCYfGFwcGxvZ29ibD1odHRwczovL3d3dzIuMHp6MC5jb20vMjAyNS8wMy8zMS8xNy83MDY1ODM2NDQucG5nIiwKICAKICAKICAKICAKICAiaHR0cHM6Ly9jZG5mZXN0LmNvbS9HMS03MjBwL3ZpZGVvLm0zdTg/dG9rZW49MlpSdnVtNVJ4SXdlRzNkZXZpY2VjYW5hcnk9ZmFsc2V8Y2FzdD1mYWxzZXxuYW1lPScgICAgRzEgKDcyMFApICDigJh8YXBwbG9nb2JsPWh0dHBzOi8vd3d3Mi4wenowLmNvbS8yMDI1LzAzLzMxLzE3LzcwNjU4MzY0NC5wbmciLAogIAogIAogIAogIAogIAoKCgoKICAgICJodHRwczovL2Rva2tvMW5ldy5uZXdrc28ucnUvZG9ra28xL3ByZW1pdW05MS9tb25vLm0zdTh8dXNlci1hZ2VudD1Nb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXaW42NDsgeDY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvMTI5LjAuMC4wIFNhZmFyaS81MzcuMzZ8cmVmZXJlcj1odHRwczovL25ld2VtYmVkcGxheS54eXovfG5hbWU9ICcgICAgIERPSyAoNzIwUCkgIOKAmHxhcHBsb2dvYmw9aHR0cHM6Ly93d3cyLjB6ejAuY29tLzIwMjUvMDMvMzEvMTcvNzA2NTgzNjQ0LnBuZyIsCiAgCiAgImh0dHBzOi8vd28uY21hLmZvb3RiYWxsaWkuaXIvaGxzMi9iMi5tM3U4fGNhc3Q9ZmFsc2V8bmFtZT0nICAgICAgV0FDRUwtVFYgICAgICDigJh8YXBwbG9nb2JsPWh0dHBzOi8vd3d3Mi4wenowLmNvbS8yMDI1LzAzLzMxLzE3LzcwNjU4MzY0NC5wbmciLAogIAoKCiJodHRwczovL2dpdGh1Yi5jb20vbzJ3cy94cG9sYS1wbGF5ZXIvcmF3L3JlZnMvaGVhZHMvbWFpbi8xLm0zdTh8dXNlci1hZ2VudD1Nb3ppbGxhLy81LjAgKGlQaG9uZTsgQ1BVIGlQaG9uZSBPUyAxNl82IGxpa2UgTWFjIE9TIFgpIEFwcGxlV2ViS2l0Ly82MDUuMS4xNSAoS0hUTUwsIGxpa2UgR2Vja28pIFZlcnNpb24vLzE2LjYgTW9iaWxlLy8xNUUxNDggU2FmYXJpLy82MDQuMXxyZWZlcmVyPWh0dHBzOi8vd3d3LnlhcmlnYS5saXZlL3xuYW1lPSAnICAgICB4cCAo2YXYqti52K/YrykgIOKAmHxhcHBsb2dvYmw9aHR0cHM6Ly93d3cyLjB6ejAuY29tLzIwMjUvMDMvMzEvMTcvNzA2NTgzNjQ0LnBuZyIKXQ==',
                        appUrl: 'https://play.google.com/store/apps/details?id=com.xpola.player',
                        downloadUrl: 'https://play.google.com/store/apps/details?id=com.xpola.player'
                    },
                    {
                        id: 2,
                        name: 'bein sport 2',
                        image: 'https://via.placeholder.com/100',
                        url: 'xmtv://WwoKICAKICAKICJodHRwOi8vMTM1LjEyNS4xMDkuNzM6OTAwMC9iZWluc3BvcnQyXy5tM3U4fGNhc3Q9ZmFsc2V8bmFtZT0nICAgV0FDRUwtVFYgICgzNjBQKSAgICAgIOKAmHxhcHBsb2dvYmw9IGh0dHBzOi8vaS5wb3N0aW1nLmNjL2h2dzdCMzhLL3dhY2VsLXR2LnBuZyAiLAogIAogICJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vS0ROVFYvVFZUL3JlZnMvaGVhZHMvbWFpbi92cDIubTN1OHxjYXN0PWZhbHNlfG5hbWU9JyAgV0FDRUwtVFYgICjZhdiq2LnYr9iv2KfZhNis2YjYr9in2KopICAgICAg4oCYfGFwcGxvZ29ibD0gaHR0cHM6Ly9pLnBvc3RpbWcuY2MvaHZ3N0IzOEsvd2FjZWwtdHYucG5nICIsCiAgCiAgCiAgCiAgCiAgCiAgCiAgImh0dHBzOi8vYWYuYXlhc3Nwb3J0LmlyL2hsczIvYmVpbjIubTN1OHxjYXN0PWZhbHNlfG5hbWU9JyAgICAgIFdBQ0VMLVRWICAgICAg4oCYfGFwcGxvZ29ibD0gaHR0cHM6Ly9pLnBvc3RpbWcuY2MvaHZ3N0IzOEsvd2FjZWwtdHYucG5nICIsCiAgCiAgImh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9hbHlzamM3LWRvdC9tYXRoL3JlZnMvaGVhZHMvbWFpbi90bzIubTN1OHxjYXN0PWZhbHNlfG5hbWU9JyAgICAgKNmF2KrYudiv2K8g2KfZhNis2YjYr9in2KopICDigJh8YXBwbG9nb2JsPSBodHRwczovL2kucG9zdGltZy5jYy9odnc3QjM4Sy93YWNlbC10di5wbmcgIiwKICAKICAKICAKICAKICAiaHR0cHM6Ly9jZG5mZXN0LmNvbS9HMi00ODBwLWNhc3QvcGxheWxpc3QubTN1OHxvcmlnaW49aHR0cHM6Ly93d3cueWFyaWdhLmxpdmV8dXNlci1hZ2VudD1Nb3ppbGxhLzUuMCAoaVBob25lOyBDUFUgaVBob25lIE9TIDE2XzYgbGlrZSBNYWMgT1MgWCkgQXBwbGVXZWJLaXQvNjA1LjEuMTUgKEtIVE1MLCBsaWtlIEdlY2tvKSBWZXJzaW9uLzE2LjYgTW9iaWxlLzE1RTE0OCBTYWZhcmkvNjA0LjF8cmVmZXJlcj1odHRwczovL3d3dy55YXJpZ2EubGl2ZS98Y2FzdD1mYWxzZXxuYW1lPScgICAgIFdBQ0VMLVRWICAgICjZiNmC2Kog2KfZhNmF2KjYp9ix2KfYqSkgIOKAmHxhcHBsb2dvYmw9aHR0cHM6Ly9pLnBvc3RpbWcuY2MvaHZ3N0IzOEsvd2FjZWwtdHYucG5nICAiLAoKICAKCgoKCiAgICAiIGh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9hbHlzamM3LWRvdC9pcHR2L3JlZnMvaGVhZHMvbWFpbi9ubS5tM3U4fHVzZXItYWdlbnQ9TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzEyOS4wLjAuMCBTYWZhcmkvNTM3LjM2fHJlZmVyZXI9aHR0cHM6Ly9uZXdlbWJlZHBsYXkueHl6L3xuYW1lPSAnICAgNEsgICAoNzIwUCkgIOKAmHxhcHBsb2dvYmw9IGh0dHBzOi8vaS5wb3N0aW1nLmNjL2h2dzdCMzhLL3dhY2VsLXR2LnBuZyAiLAogIAogIAogIAoKCiJodHRwczovL2dpdGh1Yi5jb20vbzJ3cy94cG9sYS1wbGF5ZXIvcmF3L3JlZnMvaGVhZHMvbWFpbi8xLm0zdTh8dXNlci1hZ2VudD1Nb3ppbGxhLy81LjAgKGlQaG9uZTsgQ1BVIGlQaG9uZSBPUyAxNl82IGxpa2UgTWFjIE9TIFgpIEFwcGxlV2ViS2l0Ly82MDUuMS4xNSAoS0hUTUwsIGxpa2UgR2Vja28pIFZlcnNpb24vLzE2LjYgTW9iaWxlLy8xNUUxNDggU2FmYXJpLy82MDQuMXxyZWZlcmVyPWh0dHBzOi8vd3d3LnlhcmlnYS5saXZlL3xuYW1lPSAnICAgICB4cCAo2YXYqti52K/YrykgIOKAmHxhcHBsb2dvYmw9IGh0dHBzOi8vaS5wb3N0aW1nLmNjL2h2dzdCMzhLL3dhY2VsLXR2LnBuZyAiCl0=',
                        appUrl: 'https://play.google.com/store/apps/details?id=com.xpola.player',
                        downloadUrl: 'https://play.google.com/store/apps/details?id=com.xpola.player'
                    }
                ];
                localStorage.setItem(DB_KEY, JSON.stringify(defaultChannels));
            }
        }
        
        // Get all channels
        function getChannels() {
            return JSON.parse(localStorage.getItem(DB_KEY)) || [];
        }
        
        // Add new channel
        function addChannel(channel) {
            const channels = getChannels();
            channel.id = Date.now(); // Simple ID generation
            channels.push(channel);
            localStorage.setItem(DB_KEY, JSON.stringify(channels));
            renderChannels();
        }
        
        // Delete channel
        function deleteChannel(id) {
            let channels = getChannels();
            channels = channels.filter(channel => channel.id !== id);
            localStorage.setItem(DB_KEY, JSON.stringify(channels));
            renderChannels();
            renderChannelsList();
        }
        
        // Render channels to the page
        function renderChannels() {
            const channels = getChannels();
            const container = document.getElementById('channelsContainer');
            
            container.innerHTML = '';
            
            channels.forEach(channel => {
                const channelElement = document.createElement('div');
                channelElement.className = 'channel-card';
                channelElement.innerHTML = `
                    <div class="channel-logo">
                        <img src="${channel.image}" alt="${channel.name}" onerror="this.src='https://via.placeholder.com/100?text=No+Image'">
                    </div>
                    <div class="channel-name">${channel.name}</div>
                `;
                
                channelElement.addEventListener('click', () => {
                    openApp(channel.url, channel.appUrl, channel.downloadUrl);
                });
                
                container.appendChild(channelElement);
            });
        }
        
        // Render channels list for admin panel
        function renderChannelsList() {
            const channels = getChannels();
            const container = document.getElementById('channelsList');
            
            container.innerHTML = '';
            
            channels.forEach(channel => {
                const channelElement = document.createElement('div');
                channelElement.className = 'd-flex justify-content-between align-items-center p-2 border-bottom';
                channelElement.innerHTML = `
                    <span>${channel.name}</span>
                    <button class="btn btn-danger btn-sm" onclick="deleteChannel(${channel.id})">حذف</button>
                `;
                
                container.appendChild(channelElement);
            });
        }
        
        // Open app function
        function openApp(appUrl, downloadUrl) {
            // Try to open the app
            window.location.href = appUrl;
            
            // Wait to see if the app opened
            setTimeout(function() {
                // Check if user has previously disabled the message
                if (localStorage.getItem('appInstallPrompt') !== 'disabled') {
                    // Show custom modal
                    document.getElementById('installModal').style.display = "block";
                    
                    document.getElementById('confirmInstall').onclick = function() {
                        window.open(downloadUrl, '_blank');
                        closeModal();
                    }
                    
                    document.getElementById('cancelInstall').onclick = function() {
                        closeModal();
                    }
                    
                    document.getElementById('dontShowAgain').onclick = function() {
                        if (this.checked) {
                            localStorage.setItem('appInstallPrompt', 'disabled');
                        } else {
                            localStorage.removeItem('appInstallPrompt');
                        }
                    }
                } else {
                    console.log("تم إلغاء الرسالة مسبقًا، لن تظهر مرة أخرى.");
                }
            }, 3000);
        }
        
        // Close modal
        function closeModal() {
            document.getElementById('installModal').style.display = "none";
        }
        
        // Show admin login
        function showAdminLogin() {
            document.getElementById('loginModal').style.display = 'block';
        }
        
        // Hide admin login
        function hideAdminLogin() {
            document.getElementById('loginModal').style.display = 'none';
            document.getElementById('adminPassword').value = '';
            document.getElementById('loginError').style.display = 'none';
        }
        
        // Show admin panel
        function showAdminPanel() {
            document.getElementById('adminPanel').style.display = 'block';
            renderChannelsList();
        }
        
        // Hide admin panel
        function hideAdminPanel() {
            document.getElementById('adminPanel').style.display = 'none';
            setAuthenticated(false);
        }
        
        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            // Set current year in footer
            document.getElementById('currentYear').textContent = new Date().getFullYear();
            
            // Initialize channels
            initChannels();
            renderChannels();
            
            // Admin panel form submission
            document.getElementById('channelForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const channel = {
                    name: document.getElementById('channelName').value,
                    image: document.getElementById('channelImage').value,
                    url: document.getElementById('channelUrl').value,
                    appUrl: document.getElementById('channelApp').value,
                    downloadUrl: document.getElementById('channelDownload').value
                };
                
                addChannel(channel);
                
                // Reset form
                this.reset();
            });
            
            // Admin panel toggle
            document.getElementById('adminToggle').addEventListener('click', function() {
                if (isAuthenticated()) {
                    showAdminPanel();
                } else {
                    showAdminLogin();
                }
            });
            
            // Login button
            document.getElementById('loginButton').addEventListener('click', async function() {
                const password = document.getElementById('adminPassword').value;
                
                if (await verifyPassword(password)) {
                    setAuthenticated(true);
                    hideAdminLogin();
                    showAdminPanel();
                } else {
                    document.getElementById('loginError').style.display = 'block';
                }
            });
            
            // Cancel login
            document.getElementById('cancelLogin').addEventListener('click', hideAdminLogin);
            
            // Logout admin
            document.getElementById('logoutAdmin').addEventListener('click', hideAdminPanel);
            
            // Close modal when clicking outside
            window.onclick = function(event) {
                if (event.target == document.getElementById('installModal')) {
                    closeModal();
                }
                if (event.target == document.getElementById('loginModal')) {
                    hideAdminLogin();
                }
            }
        });
    </script>
</body>
</html>
